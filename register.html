<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google 登入</title>
    <!-- 引入 Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
</head>
<body>
    <h1>Google 登入</h1>

    <!-- 顯示登入按鈕 -->
    <button id="googleSignInBtn">使用 Google 登入</button>
    <p id="userInfo"></p>
    <button id="signOutBtn" style="display: none;">登出</button>

    <script>
        // Firebase 配置，請替換為你自己的 Firebase 設定
        const firebaseConfig = {
            apiKey: "AIzaSyDC3aVYPv57JyMHLfcV-OXb5ilsJJnsvlM",
            authDomain: "project-2082277388872876828.firebaseapp.com",
            databaseURL: "https://project-2082277388872876828-default-rtdb.firebaseio.com",
            projectId: "project-2082277388872876828",
            storageBucket: "project-2082277388872876828.firebasestorage.app",
            messagingSenderId: "557947332806",
            appId: "1:557947332806:web:8704cd145a87b4dcb64fc7"
        };

        // 初始化 Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        // Google 登入提供者
        const provider = new firebase.auth.GoogleAuthProvider();

        // 取得按鈕元素
        const googleSignInBtn = document.getElementById('googleSignInBtn');
        const signOutBtn = document.getElementById('signOutBtn');
        const userInfo = document.getElementById('userInfo');

        // 顯示登入用戶資訊
        function displayUserInfo(user) {
            if (user) {
                userInfo.textContent = `歡迎，${user.displayName}！`;
                signOutBtn.style.display = 'inline-block';
                googleSignInBtn.style.display = 'none';
            } else {
                userInfo.textContent = '尚未登入';
                signOutBtn.style.display = 'none';
                googleSignInBtn.style.display = 'inline-block';
            }
        }

        // 登入操作
        googleSignInBtn.addEventListener('click', () => {
            auth.signInWithPopup(provider)
                .then((result) => {
                    const user = result.user;
                    displayUserInfo(user);
                })
                .catch((error) => {
                    console.error(error.message);
                    alert('登入失敗：' + error.message);
                });
        });

        // 登出操作
        signOutBtn.addEventListener('click', () => {
            auth.signOut()
                .then(() => {
                    displayUserInfo(null);
                })
                .catch((error) => {
                    console.error(error.message);
                    alert('登出失敗：' + error.message);
                });
        });

        // 監聽使用者登入狀態
        auth.onAuthStateChanged((user) => {
            displayUserInfo(user);
        });

        // 初始化時顯示使用者狀態
        displayUserInfo(auth.currentUser);
    </script>
</body>
</html>
